local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FrostWareUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 300)
mainFrame.Position = UDim2.new(0.5, -200, 1, 50)
mainFrame.BackgroundColor3 = Color3.fromRGB(20, 90, 200)
mainFrame.BorderSizePixel = 0
mainFrame.BackgroundTransparency = 1
mainFrame.Visible = false
mainFrame.Parent = screenGui

local uicorner = Instance.new("UICorner")
uicorner.CornerRadius = UDim.new(0, 10)
uicorner.Parent = mainFrame

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "FrostWare"
title.TextColor3 = Color3.fromRGB(235, 235, 235)
title.Font = Enum.Font.GothamBold
title.TextSize = 28
title.Parent = mainFrame

local btnClose = Instance.new("TextButton")
btnClose.Size = UDim2.new(0, 30, 0, 30)
btnClose.Position = UDim2.new(1, -35, 0, 5)
btnClose.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
btnClose.TextColor3 = Color3.new(1,1,1)
btnClose.Font = Enum.Font.GothamBold
btnClose.TextSize = 24
btnClose.Text = "X"
btnClose.Parent = mainFrame

local scriptBox = Instance.new("TextBox")
scriptBox.Size = UDim2.new(1, -20, 1, -100)
scriptBox.Position = UDim2.new(0, 10, 0, 50)
scriptBox.BackgroundColor3 = Color3.fromRGB(35, 110, 240)
scriptBox.TextColor3 = Color3.fromRGB(255, 255, 255)
scriptBox.TextWrapped = true
scriptBox.ClearTextOnFocus = false
scriptBox.MultiLine = true
scriptBox.Font = Enum.Font.Code
scriptBox.TextSize = 18
scriptBox.PlaceholderText = "Write your Lua code here..."
scriptBox.Parent = mainFrame

local textBoxUICorner = Instance.new("UICorner")
textBoxUICorner.CornerRadius = UDim.new(0, 6)
textBoxUICorner.Parent = scriptBox

local buttonContainer = Instance.new("Frame")
buttonContainer.Size = UDim2.new(1, -20, 0, 40)
buttonContainer.Position = UDim2.new(0, 10, 1, -45)
buttonContainer.BackgroundTransparency = 1
buttonContainer.Parent = mainFrame

local function createButton(name, posX, text)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Size = UDim2.new(0, 80, 1, 0)
    btn.Position = UDim2.new(0, posX, 0, 0)
    btn.BackgroundColor3 = Color3.fromRGB(60, 130, 250)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamSemibold
    btn.TextSize = 18
    btn.Text = text
    btn.AutoButtonColor = true
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn
    btn.Parent = buttonContainer
    return btn
end

local btnCopy = createButton("CopyButton", 0, "Copy")
local btnPaste = createButton("PasteButton", 90, "Paste")
local btnClear = createButton("ClearButton", 180, "Clear")
local btnExecute = createButton("ExecuteButton", 270, "Execute")

local function copyToClipboard(text)
    if setclipboard then setclipboard(text) end
end

btnCopy.MouseButton1Click:Connect(function()
    copyToClipboard(scriptBox.Text)
end)

btnPaste.MouseButton1Click:Connect(function()
    if getclipboard then
        local clip = getclipboard()
        if type(clip) == "string" then
            scriptBox.Text = clip
        end
    end
end)

btnClear.MouseButton1Click:Connect(function()
    scriptBox.Text = ""
end)

btnExecute.MouseButton1Click:Connect(function()
    pcall(function()
        loadstring(scriptBox.Text)()
    end)
end)

local dragging = false
local dragInput
local dragStart
local startPos

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quart, Enum.EasingDirection.Out)

local function openUI()
    mainFrame.Visible = true
    TweenService:Create(mainFrame, tweenInfo, {Position = UDim2.new(0.5, -200, 0.5, -150), BackgroundTransparency = 0}):Play()
end

local function closeUI()
    local tween = TweenService:Create(mainFrame, tweenInfo, {Position = UDim2.new(0.5, -200, 1, 50), BackgroundTransparency = 1})
    tween:Play()
    tween.Completed:Connect(function()
        mainFrame.Visible = false
    end)
end

btnClose.MouseButton1Click:Connect(closeUI)

local btnOpen = Instance.new("TextButton")
btnOpen.Size = UDim2.new(0, 50, 0, 50)
btnOpen.Position = UDim2.new(1, -60, 1, -60)
btnOpen.AnchorPoint = Vector2.new(1, 1)
btnOpen.BackgroundColor3 = Color3.fromRGB(60, 130, 250)
btnOpen.TextColor3 = Color3.new(1, 1, 1)
btnOpen.Font = Enum.Font.GothamBold
btnOpen.TextSize = 24
btnOpen.Text = "Open"
btnOpen.AutoButtonColor = true
local openCorner = Instance.new("UICorner")
openCorner.CornerRadius = UDim.new(0, 10)
openCorner.Parent = btnOpen
btnOpen.Parent = screenGui

btnOpen.MouseButton1Click:Connect(function()
    if not mainFrame.Visible then
        openUI()
    end
end)
